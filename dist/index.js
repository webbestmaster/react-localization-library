(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{createLocalization:()=>l});const n=require("react/jsx-runtime"),o=require("react"),c=/(?=\{\w+?\})/gu,r="_TEXT_";function a(e,t,n,o){const c=n[e];return o?function(e,t){let n=e;const o=Object.keys(t);for(const e of o)n=n.replace(new RegExp(`\\{${e}\\}`,"gu"),t[e]);return n}(c,o):c}function i(e,t,r,a){let i=r[e].split(c);const l=Object.keys(a);for(const e of l)i=i.map(((t,c)=>{if("string"!=typeof t)return t;const r=`{${e}}`;if(!t.startsWith(r))return t;const i=t.slice(r.length);return(0,n.jsxs)(o.Fragment,{children:[a[e],i]},String(`${e}-${c}`))}));return i}function l(e){const{defaultLocaleName:t,localization:c,onUseEffect:l=(()=>{})}=e;let s=t;const u={...c},f={getLocalizedString:String.toString,isFetchingLocaleData:"function"==typeof u[t],localeName:t,setLocaleName:String.toString},g=(0,o.createContext)(f);return{Locale:function(e){const{stringKey:t,valueMap:c={}}=e,{localeName:a}=(0,o.useContext)(g),l=u[a],f=u[s];return"function"!=typeof l?(0,n.jsx)(n.Fragment,{children:i(t,0,l,c)}):"function"!=typeof f?(0,n.jsx)(n.Fragment,{children:i(t,0,f,c)}):(0,n.jsx)(n.Fragment,{children:r})},LocalizationProvider:function(e){const{children:t,forcedLocaleName:c}=e,[i,m]=(0,o.useState)(null!=c?c:f.localeName),[y,d]=(0,o.useState)(f.isFetchingLocaleData);(0,o.useEffect)((()=>{"string"==typeof c&&""!==c.trim()&&m(c)}),[c]),(0,o.useEffect)((()=>{if("function"!=typeof u[i])return s=i,void l({isFetchingLocaleData:!1,localeName:i});d(!0),l({isFetchingLocaleData:!0,localeName:s}),async function(e,t){const n=t[e];return"function"==typeof n?n():n}(i,u).then((async e=>async function(e){return new Promise((e=>{setTimeout(e,0)}))}().then((()=>{u[i]=e,s=i,l({isFetchingLocaleData:!1,localeName:i})})))).finally((()=>{d(!1)}))}),[i,d]);const p=(0,o.useCallback)((e=>{y||m(e)}),[y]),h=(0,o.useCallback)(((e,t)=>{const n=u[i],o=u[s];return y&&"function"!=typeof o?a(e,0,o,t):"function"!=typeof n?a(e,0,n,t):"function"!=typeof o?a(e,0,o,t):r}),[i,y]),L=(0,o.useMemo)((()=>({getLocalizedString:h,isFetchingLocaleData:y,localeName:i,setLocaleName:p})),[i,p,h,y]);return(0,n.jsx)(g.Provider,{value:L,children:t})},useLocale:function(){return(0,o.useContext)(g)}}}module.exports=t})();
//# sourceMappingURL=index.js.map